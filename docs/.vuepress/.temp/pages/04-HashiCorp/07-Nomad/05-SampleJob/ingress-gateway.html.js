export const data = JSON.parse("{\"key\":\"v-0fc379f6\",\"path\":\"/04-HashiCorp/07-Nomad/05-SampleJob/ingress-gateway.html\",\"title\":\"Nomad ingress gateway\",\"lang\":\"ko-KR\",\"frontmatter\":{\"description\":\"Nomad ingress gateway with consul\",\"tag\":[\"Nomad\",\"Sample\",\"Job\",\"\"],\"head\":[[\"meta\",{\"property\":\"og:url\",\"content\":\"https://vuepress-theme-hope-docs-demo.netlify.app/04-HashiCorp/07-Nomad/05-SampleJob/ingress-gateway.html\"}],[\"meta\",{\"property\":\"og:site_name\",\"content\":\"docmoa\"}],[\"meta\",{\"property\":\"og:title\",\"content\":\"Nomad ingress gateway\"}],[\"meta\",{\"property\":\"og:description\",\"content\":\"Nomad ingress gateway with consul\"}],[\"meta\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"meta\",{\"property\":\"og:locale\",\"content\":\"ko-KR\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"Nomad\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"Sample\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"Job\"}],[\"script\",{\"type\":\"application/ld+json\"},\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"Article\\\",\\\"headline\\\":\\\"Nomad ingress gateway\\\",\\\"image\\\":[\\\"\\\"],\\\"dateModified\\\":null,\\\"author\\\":[]}\"]]},\"headers\":[{\"level\":2,\"title\":\"Nomad job으로 ingress gateway 사용하기 (with consul)\",\"slug\":\"nomad-job으로-ingress-gateway-사용하기-with-consul\",\"link\":\"#nomad-job으로-ingress-gateway-사용하기-with-consul\",\"children\":[{\"level\":3,\"title\":\"테스트 job (python fastapi)\",\"slug\":\"테스트-job-python-fastapi\",\"link\":\"#테스트-job-python-fastapi\",\"children\":[]}]},{\"level\":2,\"title\":\"만약 service가 http로 떠야한다면 아래와 같이 service등록도 진행해야한다.\",\"slug\":\"만약-service가-http로-떠야한다면-아래와-같이-service등록도-진행해야한다\",\"link\":\"#만약-service가-http로-떠야한다면-아래와-같이-service등록도-진행해야한다\",\"children\":[]},{\"level\":2,\"title\":\"ingress job\",\"slug\":\"ingress-job\",\"link\":\"#ingress-job\",\"children\":[]}],\"git\":{},\"readingTime\":{\"minutes\":0.56,\"words\":169},\"filePathRelative\":\"04-HashiCorp/07-Nomad/05-SampleJob/ingress-gateway.md\",\"excerpt\":\"<h1> Nomad ingress gateway</h1>\\n<h2> Nomad job으로 ingress gateway 사용하기 (with consul)</h2>\\n<ul>\\n<li>consul로 설정하는 ingress gateway가 아닌 Nomad job 기동 시에 ingress gateway 활성화 예제\\n<ul>\\n<li>hashicorp 공식 예제가 아닌 다른 걸 해보려하다, 특이한 부분을 확인함</li>\\n</ul>\\n</li>\\n</ul>\\n<h3> 테스트 job (python fastapi)</h3>\\n<div class=\\\"language-hcl line-numbers-mode\\\" data-ext=\\\"hcl\\\"><pre class=\\\"language-hcl\\\"><code>job <span class=\\\"token string\\\">\\\"22-fastapi\\\"</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">datacenters</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"dc1\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n\\n  group <span class=\\\"token string\\\">\\\"fastapi\\\"</span> <span class=\\\"token punctuation\\\">{</span>\\n\\n    <span class=\\\"token keyword\\\">network</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token property\\\">mode</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"bridge\\\"</span>\\n      <span class=\\\"token comment\\\">#service가 80으로 뜸, 만약 다른 포트로 뜨는 서비스를 사용 할 경우 image와 to만 변경</span>\\n      port <span class=\\\"token string\\\">\\\"http\\\"</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">to</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token number\\\">80</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    \\n    <span class=\\\"token keyword\\\">service</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token property\\\">name</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"fastapi\\\"</span>\\n      <span class=\\\"token comment\\\">#여기서 port에 위에서 미리 선언한 http를 쓸 경우 다이나믹한 port를 가져오는데 </span>\\n      <span class=\\\"token comment\\\">#그럴 경우 ingress gateway에서 못 읽어 온다.</span>\\n      <span class=\\\"token property\\\">port</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"80\\\"</span>\\n      <span class=\\\"token keyword\\\">connect</span> <span class=\\\"token punctuation\\\">{</span>\\n        sidecar_service<span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n\\n    task <span class=\\\"token string\\\">\\\"fastapi\\\"</span> <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token property\\\">driver</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"docker\\\"</span>\\n\\n      <span class=\\\"token keyword\\\">config</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">image</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"tiangolo/uvicorn-gunicorn-fastapi\\\"</span>\\n        <span class=\\\"token property\\\">ports</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"http\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n\\n      <span class=\\\"token keyword\\\">resources</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">cpu</span>    <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token number\\\">500</span>\\n        <span class=\\\"token property\\\">memory</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token number\\\">282</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token keyword\\\">scaling</span>  <span class=\\\"token punctuation\\\">{</span>\\n      <span class=\\\"token property\\\">enabled</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token boolean\\\">true</span>\\n      <span class=\\\"token property\\\">min</span>     <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token number\\\">1</span>\\n      <span class=\\\"token property\\\">max</span>     <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token number\\\">3</span>\\n\\n      <span class=\\\"token keyword\\\">policy</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token property\\\">evaluation_interval</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"5s\\\"</span>\\n        <span class=\\\"token property\\\">cooldown</span>            <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"1m\\\"</span>\\n        <span class=\\\"token comment\\\">#driver = \\\"nomad-apm\\\"</span>\\n        check <span class=\\\"token string\\\">\\\"mem_allocated_percentage\\\"</span> <span class=\\\"token punctuation\\\">{</span>\\n          <span class=\\\"token property\\\">source</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"nomad-apm\\\"</span>\\n          <span class=\\\"token property\\\">query</span>  <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token string\\\">\\\"max_memory\\\"</span>\\n\\n          strategy <span class=\\\"token string\\\">\\\"target-value\\\"</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token property\\\">target</span> <span class=\\\"token punctuation\\\">=</span> <span class=\\\"token number\\\">80</span>\\n          <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n      <span class=\\\"token punctuation\\\">}</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n</code></pre><div class=\\\"line-numbers\\\" aria-hidden=\\\"true\\\"><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div></div></div>\",\"copyright\":{\"license\":\"CC BY-NC-ND 4.0 Licensed | ⓒ 2021-present docmoa™ contributers all rights reserved.\"}}")

if (import.meta.webpackHot) {
  import.meta.webpackHot.accept()
  if (__VUE_HMR_RUNTIME__.updatePageData) {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  }
}

if (import.meta.hot) {
  import.meta.hot.accept(({ data }) => {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  })
}
